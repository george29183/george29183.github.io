<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbital Architect: The Bonding Lab</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (to compile JSX in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .animate-spin-slow { animation: spin 8s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-bounce-short { animation: bounce-short 1s infinite; }
        @keyframes bounce-short { 
            0%, 100% { transform: translateY(0); } 
            50% { transform: translateY(-10px); } 
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons (Inline SVG for standalone compatibility) ---
        const Icons = {
            Beaker: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 3h15"/><path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"/><path d="M6 14h12"/></svg>,
            Atom: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1"/><path d="M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z"/><path d="M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z"/></svg>,
            CheckCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            XCircle: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>,
            ArrowRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
            RefreshCw: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0 1 15-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 0 1-15 6.7L3 16"/></svg>
        };

        // --- Game Data ---
        const LEVELS = [
          {
            id: 1,
            title: "Orbital Identification",
            instruction: "Select the orbital that is spherical in shape.",
            type: 'identification',
            data: { options: ['s', 'p'], correct: 's', explanation: "Correct! The 's' orbital is spherical. (Lecture Note Pg 10)" }
          },
          {
            id: 2,
            title: "Orbital Identification",
            instruction: "Select the orbital that has a dumbbell shape.",
            type: 'identification',
            data: { options: ['s', 'p'], correct: 'p', explanation: "Correct! The 'p' orbital is dumbbell-shaped. (Lecture Note Pg 10)" }
          },
          {
            id: 3,
            title: "Sigma Bond Creation",
            instruction: "Create a Sigma (σ) bond using two 's' orbitals (like in H2). How should they overlap?",
            type: 'bonding',
            data: { orbital1: 's', orbital2: 's', correctOverlap: 'head-on', correctBond: 'sigma', explanation: "Correct! Head-on overlap of s-s orbitals forms a Sigma bond. (Lecture Note Pg 10)" }
          },
          {
            id: 4,
            title: "Sigma Bond with p-orbitals",
            instruction: "Create a bond for HF (Hydrogen Fluoride). We have an 's' and a 'p' orbital.",
            type: 'bonding',
            data: { orbital1: 's', orbital2: 'p', correctOverlap: 'head-on', correctBond: 'sigma', explanation: "Correct! The s orbital overlaps head-on with the p orbital to form a Sigma bond. (Lecture Note Pg 10)" }
          },
          {
            id: 5,
            title: "Pi Bond Creation",
            instruction: "We need to make the second bond in O2 (Oxygen). We have two parallel 'p' orbitals.",
            type: 'bonding',
            data: { orbital1: 'p', orbital2: 'p', correctOverlap: 'sideways', correctBond: 'pi', explanation: "Perfect! Sideways overlap of p-orbitals creates a Pi (π) bond. This usually happens in double/triple bonds. (Lecture Note Pg 10)" }
          },
          {
            id: 6,
            title: "Hybridization Lab: BeF2",
            instruction: "Beryllium (Be) needs to form 2 bonds for BeF2. Mix the orbitals to get the correct hybridization.",
            type: 'hybridization',
            data: { molecule: "BeF2", geometry: "Linear", requiredOrbitals: ['s', 'p'], correctHybrid: 'sp', explanation: "Correct! Mixing one 's' and one 'p' gives two 'sp' hybrid orbitals. Linear geometry. (Lecture Note Pg 27)" }
          },
          {
            id: 7,
            title: "Hybridization Lab: BF3",
            instruction: "Boron (B) needs to form 3 bonds for BF3. Mix the orbitals!",
            type: 'hybridization',
            data: { molecule: "BF3", geometry: "Trigonal Planar", requiredOrbitals: ['s', 'p', 'p'], correctHybrid: 'sp2', explanation: "Excellent! One 's' and two 'p' orbitals make three 'sp2' hybrid orbitals. (Lecture Note Pg 29)" }
          },
          {
            id: 8,
            title: "Hybridization Lab: CH4",
            instruction: "Carbon (C) needs 4 identical bonds for Methane (CH4).",
            type: 'hybridization',
            data: { molecule: "CH4", geometry: "Tetrahedral", requiredOrbitals: ['s', 'p', 'p', 'p'], correctHybrid: 'sp3', explanation: "Masterful! One 's' and three 'p' orbitals create four 'sp3' hybrid orbitals. (Lecture Note Pg 30)" }
          },
          {
            id: 9,
            title: "Hybridization Lab: PCl5",
            instruction: "Phosphorus (P) needs 5 identical bonds for phosphorus pentachloride (PCl5).",
            type: 'hybridization',
            data: {
            molecule: "PCl5",
            geometry: "Trigonal Biprymidal",
            requiredOrbitals: ['s', 'p', 'p', 'p', 'd'], // 1s + 3p
            correctHybrid: 'sp3d',
            explanation: "Masterful! One 's' and three 'p' and one 'd' orbitals create five 'sp3d' hybrid orbitals. (Lecture Note Pg 30)",
            },
        },
        {
            id: 10,
            title: "Hybridization Lab: SF6",
            instruction: "Sulphur (S) needs 6 identical bonds for Sulphur Hexafloride (SF6).",
            type: 'hybridization',
            data: {
            molecule: "SF6",
            geometry: "Octahedral",
            requiredOrbitals: ['s', 'p', 'p', 'p', 'd','d'], // 1s + 3p
            correctHybrid: 'sp3d2',
            explanation:"Masterful! One 's' and three 'p' and two 'd' orbitals create six 'sp3d2' hybrid orbitals. (Lecture Note Pg 30)",
            }
        }
        ];

        // --- Visual Component ---
        const OrbitalVisual = ({ type, color = "bg-blue-500" }) => {
            if (type === 's') {
                return (
                    <div className={`w-16 h-16 rounded-full ${color} opacity-80 shadow-lg flex items-center justify-center text-white font-bold animate-pulse text-xl`}>s</div>
                );
            }
            if (type === 'p') {
                return (
                    <div className="relative w-24 h-12 flex items-center justify-center">
                        <div className={`absolute left-0 w-12 h-12 rounded-full ${color} opacity-80`}></div>
                        <div className={`absolute right-0 w-12 h-12 rounded-full ${color} opacity-80`}></div>
                        <span className="relative z-10 text-white font-bold text-xl">p</span>
                    </div>
                );
            }
            if (type === 'd') {
            return (
            <div className="relative w-24 h-fit flex items-center justify-center">
                <div className={`absolute left-0 w-12 h-12 rounded-full ${color} opacity-80`}></div>
                <div className={`absolute right-0 w-12 h-12 rounded-full ${color} opacity-80`}></div>
                <div className={`absolute top-0 w-12 h-12 rounded-full ${color} opacity-80`}></div>
                <div className={`absolute bottom-0 w-12 h-12 rounded-full ${color} opacity-80`}></div>
                <span className="relative z-10 text-white font-bold">d</span>
            </div>
            );
        }
            return (
                <div className={`w-20 h-14 rounded-full ${color} border-2 border-white opacity-90 flex items-center justify-center text-white font-bold text-lg`}>{type}</div>
            );
        };

        // --- Main App Component ---
        function OrbitalGame() {
            const [currentLevelIdx, setCurrentLevelIdx] = useState(0);
            const [score, setScore] = useState(0);
            const [gameState, setGameState] = useState('playing'); // playing, success, failure, complete
            const [feedback, setFeedback] = useState("");
            
            const [bondingSelection, setBondingSelection] = useState(null);
            const [hybridMix, setHybridMix] = useState([]);

            const currentLevel = LEVELS[currentLevelIdx];

            const handleIdentification = (selection) => {
                if (selection === currentLevel.data.correct) handleSuccess();
                else handleFailure("Incorrect shape. Remember: s is spherical, p is dumbbell.");
            };

            const handleBonding = () => {
                if (!bondingSelection) return;
                if (bondingSelection === currentLevel.data.correctOverlap) handleSuccess();
                else {
                    let msg = "Incorrect overlap. ";
                    if (currentLevel.data.correctOverlap === 'head-on') msg += "Sigma bonds require head-on overlap.";
                    else msg += "Pi bonds require sideways overlap.";
                    handleFailure(msg);
                }
            };

            const handleHybridizationAdd = (orbital) => {
                if (hybridMix.length < 6) setHybridMix([...hybridMix, orbital]);
            };

            const handleHybridizationCheck = () => {
              const sCount = hybridMix.filter(x => x === 's').length;
                const pCount = hybridMix.filter(x => x === 'p').length;
                const dCount = hybridMix.filter(x => x === 'd').length;
                let userHybrid = '';
                if (sCount === 1 && pCount === 1 && dCount === 0) userHybrid = 'sp';
                if (sCount === 1 && pCount === 2 && dCount === 0) userHybrid = 'sp2';
                if (sCount === 1 && pCount === 3 && dCount === 0) userHybrid = 'sp3';
                if (sCount === 1 && pCount === 3 && dCount === 1) userHybrid = 'sp3d';
                if (sCount === 1 && pCount === 3 && dCount === 2) userHybrid = 'sp3d2';

                if (userHybrid === currentLevel.data.correctHybrid) handleSuccess();
                else handleFailure(`Incorrect mix. You mixed ${sCount}s and ${pCount}p. We need ${currentLevel.data.correctHybrid}.`);
            };

            const handleSuccess = () => {
                setScore(score + 10);
                setFeedback(currentLevel.data.explanation);
                setGameState('success');
            };

            const handleFailure = (msg) => {
                setFeedback(msg);
                setGameState('failure');
            };

            const nextLevel = () => {
                setHybridMix([]);
                setBondingSelection(null);
                setFeedback("");
                if (currentLevelIdx < LEVELS.length - 1) {
                    setCurrentLevelIdx(currentLevelIdx + 1);
                    setGameState('playing');
                } else {
                    setGameState('complete');
                }
            };

            const resetLevel = () => {
                setHybridMix([]);
                setBondingSelection(null);
                setFeedback("");
                setGameState('playing');
            };

            // --- Render Logic ---
            if (gameState === 'complete') {
                return (
                    <div className="min-h-screen bg-slate-900 text-white flex flex-col items-center justify-center p-4">
                        <div className="max-w-2xl w-full bg-slate-800 p-8 rounded-2xl shadow-2xl border border-cyan-500/30 text-center">
                            <div className="inline-block p-4 rounded-full bg-cyan-900/50 mb-6 text-cyan-400">
                                <Icons.CheckCircle />
                            </div>
                            <h1 className="text-4xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400">Certification Complete!</h1>
                            <p className="text-xl text-slate-300 mb-8">You have mastered Atomic Orbital Theory.</p>
                            <div className="text-6xl font-black text-white mb-8">{score} PTS</div>
                            <button onClick={() => window.location.reload()} className="px-8 py-3 bg-cyan-600 hover:bg-cyan-500 rounded-full font-bold transition-all transform hover:scale-105">Play Again</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-slate-900 text-slate-100 font-sans selection:bg-cyan-500/30">
                    <div className="max-w-4xl mx-auto px-4 py-8">
                        <header className="flex justify-between items-center mb-8 border-b border-slate-700 pb-4">
                            <div className="flex items-center gap-3">
                                <div className="text-cyan-400"><Icons.Beaker /></div>
                                <h1 className="text-2xl font-bold text-white tracking-tight">Orbital Architect <span className="text-slate-500 text-lg font-normal">| The Bonding Lab</span></h1>
                            </div>
                            <div className="flex items-center gap-6">
                                <div className="text-sm text-slate-400">Level {currentLevelIdx + 1}/{LEVELS.length}</div>
                                <div className="bg-slate-800 px-4 py-1 rounded-full border border-slate-700 font-mono text-cyan-400">SCORE: {score}</div>
                            </div>
                        </header>

                        <main>
                            <div className="bg-slate-800 text-cyan-400 p-4 rounded-lg mb-6 flex items-start space-x-4 border border-cyan-500/30 shadow-[0_0_15px_rgba(6,182,212,0.15)]">
                                <div className="bg-cyan-900/50 p-2 rounded-full"><Icons.Atom /></div>
                                <div>
                                    <h3 className="font-bold text-sm uppercase tracking-wider mb-1">Dr. Orbital AI</h3>
                                    <p className="text-slate-200 text-lg">{gameState === 'playing' ? currentLevel.instruction : feedback}</p>
                                </div>
                            </div>

                            <div className="bg-slate-800/50 min-h-[400px] rounded-2xl p-8 border border-slate-700 shadow-xl relative overflow-hidden flex flex-col items-center">
                                <div className="absolute top-0 right-0 w-64 h-64 bg-cyan-500/5 rounded-full blur-3xl -z-10"></div>
                                <div className="absolute bottom-0 left-0 w-64 h-64 bg-purple-500/5 rounded-full blur-3xl -z-10"></div>

                                {gameState === 'success' ? (
                                    <div className="flex flex-col items-center justify-center h-full py-12 animate-in fade-in zoom-in duration-300">
                                        <div className="text-green-400 mb-6 scale-150"><Icons.CheckCircle /></div>
                                        <h2 className="text-3xl font-bold text-white mb-2">Excellent!</h2>
                                        <p className="text-slate-300 mb-8 text-center max-w-lg">{feedback}</p>
                                        <button onClick={nextLevel} className="flex items-center gap-2 px-8 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-full transition-all hover:scale-105">Next Mission <Icons.ArrowRight /></button>
                                    </div>
                                ) : gameState === 'failure' ? (
                                    <div className="flex flex-col items-center justify-center h-full py-12 animate-in fade-in zoom-in duration-300">
                                        <div className="text-red-400 mb-6 scale-150"><Icons.XCircle /></div>
                                        <h2 className="text-3xl font-bold text-white mb-2">Bond Failed</h2>
                                        <p className="text-slate-300 mb-8 text-center max-w-lg">{feedback}</p>
                                        <button onClick={resetLevel} className="flex items-center gap-2 px-8 py-3 bg-slate-600 hover:bg-slate-500 text-white font-bold rounded-full transition-all hover:scale-105"><Icons.RefreshCw /> Try Again</button>
                                    </div>
                                ) : (
                                    <div className="w-full flex flex-col items-center">
                                        <h2 className="text-2xl font-bold text-center mb-2">{currentLevel.title}</h2>
                                        <div className="w-16 h-1 bg-cyan-500/50 mx-auto rounded-full mb-8"></div>
                                        
                                        {currentLevel.type === 'identification' && (
                                            <div className="grid grid-cols-2 gap-8 mt-4">
                                                {currentLevel.data.options.map(opt => (
                                                    <button key={opt} onClick={() => handleIdentification(opt)} className="bg-white/5 hover:bg-white/10 border border-white/10 hover:border-cyan-400 transition-all p-8 rounded-xl flex flex-col items-center gap-4 group">
                                                        <div className="transform group-hover:scale-110 transition-transform"><OrbitalVisual type={opt} /></div>
                                                        <span className="text-xl font-semibold text-slate-300 group-hover:text-white uppercase">{opt} Orbital</span>
                                                    </button>
                                                ))}
                                            </div>
                                        )}

                                        {currentLevel.type === 'bonding' && (
                                            <div className="flex flex-col items-center w-full">
                                                <div className="flex items-center space-x-12 mb-8">
                                                    <div className="flex flex-col items-center"><span className="mb-2 text-slate-400">Atom A</span><OrbitalVisual type={currentLevel.data.orbital1} color="bg-blue-500" /></div>
                                                    <div className="text-2xl text-slate-500">+</div>
                                                    <div className="flex flex-col items-center"><span className="mb-2 text-slate-400">Atom B</span><OrbitalVisual type={currentLevel.data.orbital2} color="bg-green-500" /></div>
                                                </div>
                                                <div className="grid grid-cols-2 gap-4 w-full max-w-md mb-8">
                                                    <button onClick={() => setBondingSelection('head-on')} className={`p-6 rounded-lg border-2 transition-all flex flex-col items-center ${bondingSelection === 'head-on' ? 'border-cyan-400 bg-cyan-900/30' : 'border-slate-600 hover:border-slate-400'}`}>
                                                        <div className="flex -space-x-2 mb-2"><div className="w-8 h-8 rounded-full bg-slate-400"></div><div className="w-8 h-8 rounded-full bg-slate-400"></div></div>
                                                        <span className="font-semibold">Head-on</span>
                                                        <span className="text-xs text-slate-400">(End-to-end)</span>
                                                    </button>
                                                    <button onClick={() => setBondingSelection('sideways')} className={`p-6 rounded-lg border-2 transition-all flex flex-col items-center ${bondingSelection === 'sideways' ? 'border-cyan-400 bg-cyan-900/30' : 'border-slate-600 hover:border-slate-400'}`}>
                                                        <div className="flex space-x-1 mb-2"><div className="w-4 h-8 rounded-full bg-slate-400"></div><div className="w-4 h-8 rounded-full bg-slate-400"></div></div>
                                                        <span className="font-semibold">Sideways</span>
                                                        <span className="text-xs text-slate-400">(Parallel)</span>
                                                    </button>
                                                </div>
                                                <button onClick={handleBonding} disabled={!bondingSelection} className="px-8 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-full shadow-lg transition-all transform hover:scale-105">Attempt Bond</button>
                                            </div>
                                        )}

                                        {currentLevel.type === 'hybridization' && (
                                            <div className="w-full max-w-2xl">
                                                <div className="bg-slate-900/50 p-6 rounded-xl border border-slate-700">
                                                    <div className="flex justify-between items-center mb-4">
                                                        <div className="text-slate-300">Target: <span className="text-cyan-400 font-bold text-xl">{currentLevel.data.molecule}</span></div>
                                                        <div className="text-slate-300">Geometry: <span className="text-purple-400 font-bold">{currentLevel.data.geometry}</span></div>
                                                    </div>
                                                    <div className="bg-black/40 h-32 rounded-lg border-2 border-dashed border-slate-600 flex items-center justify-center space-x-4 mb-6 relative overflow-hidden">
                                                        {hybridMix.length === 0 && <span className="text-slate-500 italic absolute">Add orbitals to the mixer...</span>}
                                                        {hybridMix.map((orb, idx) => (
                                                            <div key={idx} className="animate-bounce-short">
                                                                <OrbitalVisual type={orb} color={orb === 's' ? 'bg-yellow-500' : 'bg-pink-500'} />
                                                            </div>
                                                        ))}
                                                    </div>
                                                    <div className="flex gap-4 justify-center mb-6">
                                                        <button onClick={() => handleHybridizationAdd('s')} className="flex items-center gap-2 px-4 py-2 bg-yellow-600/80 hover:bg-yellow-500 rounded-lg font-bold transition-colors shadow-lg border border-yellow-400/30"><div className="w-4 h-4 rounded-full bg-white"></div> Add s</button>
                                                        <button onClick={() => handleHybridizationAdd('p')} className="flex items-center gap-2 px-4 py-2 bg-pink-600/80 hover:bg-pink-500 rounded-lg font-bold transition-colors shadow-lg border border-pink-400/30"><div className="w-4 h-2 rounded-full bg-white"></div> Add p</button>
                                                         <button onClick={() => handleHybridizationAdd('d')} className="flex items-center gap-2 px-4 py-2 bg-blue-600/80 hover:bg-blue-500 rounded-lg font-bold transition-colors">
                 <div className="w-4 h-2 rounded-full bg-white"></div> Add d-orbital
            </button>
                                                        <button onClick={() => setHybridMix([])} className="p-2 bg-slate-700 hover:bg-slate-600 rounded-lg" title="Clear"><Icons.RefreshCw /></button>
                                                    </div>
                                                    <button onClick={handleHybridizationCheck} disabled={hybridMix.length < 2} className="w-full py-4 bg-purple-600 hover:bg-purple-500 disabled:opacity-50 text-white font-bold text-lg rounded-xl shadow-lg transition-all hover:scale-[1.02]">HYBRIDIZE!</button>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        </main>
                        <footer className="mt-12 text-center text-slate-500 text-sm">
                            <p>Based on Lecture Note Chapter 5: Atomic Orbital & Bonding Theory</p>
                        </footer>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OrbitalGame />);
    </script>
</body>
</html>
